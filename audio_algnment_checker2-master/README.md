# 音频对齐检测器

这是一个用于检测两条音频是否对齐的桌面应用程序。通过可视化波形对比，该应用可以检测两个音频文件是否在节奏点上对齐，并显示它们之间的偏差是否小于0.02秒的阈值。

## 主要功能

- 导入两个音频文件进行比较
- 可视化音频波形并重叠显示
- 检测节奏点并计算时间偏差
- 判断音频是否对齐（偏差<0.02秒）
- 批量处理成对的音频文件并分析对齐情况
- 反馈标记功能，可以对分析结果进行人工标记和反馈
- 机器学习功能，基于反馈数据训练模型以提高检测准确性
- 数据提取功能，可从现有Excel/CSV中提取ID和对齐状态数据
- 自动反馈功能，可导入参考数据并自动应用反馈

## 安装和使用

1. 安装依赖：
```
pip install -r requirements.txt
```

2. 运行应用：
```
python main.py
```

## 新功能使用说明

### 数据提取功能
1. 在"数据提取"标签页中，选择包含ID和对齐状态的Excel或CSV文件
2. 选择ID列和对齐状态列
3. 设置数据转换规则（如"无需对齐"→"对齐"，"已对齐"→"不对齐"）
4. 预览数据转换结果
5. 提取并保存为标准格式的CSV文件

### 自动反馈功能
1. 在"批量对齐检测"标签页完成分析后，切换到"反馈标记"标签页
2. 点击"从批量检测导入结果"导入分析结果
3. 点击"导入参考数据并自动反馈"，选择由数据提取功能生成的CSV文件
4. 系统会自动匹配ID，将参考数据中的实际对齐状态应用到反馈表，并自动标记系统判断是否正确
5. 保存反馈结果用于机器学习

### 反馈标记功能
1. 在"批量对齐检测"标签页完成分析后，切换到"反馈标记"标签页
2. 点击"从批量检测导入结果"按钮导入分析结果
3. 逐条选择结果项，进行实际情况标记和反馈
4. 可以保存标记结果到CSV文件，或从CSV文件加载已有标记

### 机器学习功能
1. 在"机器学习"标签页中，选择训练数据来源（反馈标记数据或外部CSV文件）
2. 设置训练参数，点击"训练模型"开始训练
3. 训练完成后，可以保存模型或加载已有模型
4. 点击"使用机器学习模型进行对齐检测"按钮，对当前批量文件应用模型进行检测

## 项目结构

- `main.py`: 应用程序入口
- `audio_alignment/`: 主模块
  - `gui/`: 用户界面模块
  - `core/`: 核心处理逻辑
  - `utils/`: 工具函数 